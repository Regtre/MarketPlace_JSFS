{"ast":null,"code":"import axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst qs = require(\"qs\");\n\nconst expire_time = 0.1;\nconst api = Cookies.withAttributes({\n  path: \"/\",\n  sameSite: \"strict\",\n  secure: true\n});\nconst headers = {\n  \"Content-Type\": \"application/x-www-form-urlencoded\"\n};\nconst burl = \"http://localhost:8000\";\n\nconst url = () => {\n  return burl;\n};\n/**\n * Use to login with the cookies data\n * @param {String} pseudo user\n * @param {String} password user\n * @returns axios response\n */\n\n\nconst login = async (pseudo, password) => {\n  const data = {\n    pseudo,\n    password\n  };\n  return axios.post(`${burl}/users/login`, qs.stringify(data), {\n    headers: headers\n  }).then(res => {\n    api.set(\"user\", res.data.id, {\n      expires: expire_time,\n      secure: true\n    });\n    return res;\n  }).catch(e => e);\n};\n/**\n * Use to signup, by sending a axios request\n * @param {Object} send user data like this :\n * - pseudo\n * - password\n * - money\n * @returns axios response\n */\n\n\nconst signup = async send => {\n  return axios.post(`${burl}/users/signup`, qs.stringify(send), {\n    headers: headers\n  }).then(res => {\n    api.set(\"user\", res.data.id, {\n      expires: expire_time,\n      secure: true\n    });\n    return res;\n  }).catch(e => e);\n};\n/**\n * Use to know if is authenticate\n * @returns Boolean\n */\n\n\nconst isAuth = () => {\n  return api.get(\"user\") !== undefined;\n};\n/**\n * Remove this cookie\n */\n\n\nconst logout = () => {\n  api.remove(\"user\");\n};\n/**\n * Use to get user id in this cookie\n * @returns the user id\n */\n\n\nconst getUserId = () => {\n  return api.get(\"user\");\n};\n/**\n * Creat a item in this data base\n * @param {Object} dataItem to creat\n * @returns Axios response\n */\n\n\nconst createItem = async dataItem => {\n  dataItem.id_owner = api.get(\"user\");\n  return axios.post(`${burl}/items/create`, qs.stringify(dataItem), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n/**\n * Use to get the user's object\n * @returns A list of object of this user\n */\n\n\nconst getItemUser = async () => {\n  return axios.get(`${burl}/items/self/${api.get(\"user\")}`).then(res => res.data).catch(e => {\n    console.log(e);\n    return [];\n  });\n};\n/**\n * Get other's items\n * @returns Return the list of other's items\n */\n\n\nconst getItemOther = async () => {\n  return axios.get(`${burl}/items/other/${api.get(\"user\")}`).then(res => res.data).catch(e => {\n    console.log(e);\n    return [];\n  });\n};\n/**\n * Set money of this user\n * @param {Number} money change\n * @returns Axios's response\n */\n\n\nconst setMoney = async money => {\n  return axios.put(`${burl}/users/wallet/${api.get(\"user\")}`, qs.stringify({\n    money: money\n  }), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst setSellItem = async (itemId, sell) => {\n  return axios.put(`${burl}/items/sell/${itemId}`, qs.stringify({\n    sell\n  }), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n/**\n * Buy this item, and take the money of this users and add money to the user's item\n * @param {Object} item buy\n * @returns the change with the sell part of this item\n */\n\n\nconst buyItem = async item => {\n  axios.get(`${burl}/users/find/${item.id_owner}`).then(e => {\n    let argent = e.data;\n    const update_money = parseInt(argent) + item.price;\n    axios.put(`${burl}/users/wallet/${item.id_owner}`, qs.stringify({\n      money: update_money\n    }), {\n      headers: headers\n    }).then(res => res).catch(ee => console.log(ee));\n  }).catch(e => e);\n  return axios.put(`${burl}/items/buy/${item._id}`, qs.stringify({\n    sell: true,\n    id: api.get(\"user\")\n  }), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst getItemAll = async () => {\n  return axios.get(`${burl}/items/all`).then(res => res.data).catch(e => {\n    console.log(e);\n    return [];\n  });\n};\n/**\n * Use to delete this item\n * @param {Number} id_item to delete\n * @returns Axios's response\n */\n\n\nconst deleteItem = async id_item => {\n  return axios.delete(`${burl}/items/delete/${id_item}`).then(res => res).catch(e => e);\n};\n/**\n * Change this object\n * @param {String} id_item id of this item\n * @param {Object} dataItem modification value\n * @returns\n */\n\n\nconst changeItem = async (id_item, dataItem) => {\n  dataItem.published_date = Date.now();\n  return axios.put(`${burl}/items/update/${id_item}`, qs.stringify(dataItem), {\n    headers: headers\n  }).then(res => res).catch(e => []);\n};\n\nconst exportedAPI = {\n  url,\n  login,\n  signup,\n  isAuth,\n  logout,\n  createItem,\n  getUserId,\n  getItemUser,\n  getItemOther,\n  setMoney,\n  buyItem,\n  deleteItem,\n  changeItem,\n  getItemAll,\n  setSellItem\n};\nexport default exportedAPI;","map":{"version":3,"sources":["/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/utils/API.js"],"names":["axios","Cookies","qs","require","expire_time","api","withAttributes","path","sameSite","secure","headers","burl","url","login","pseudo","password","data","post","stringify","then","res","set","id","expires","catch","e","signup","send","isAuth","get","undefined","logout","remove","getUserId","createItem","dataItem","id_owner","getItemUser","console","log","getItemOther","setMoney","money","put","setSellItem","itemId","sell","buyItem","item","argent","update_money","parseInt","price","ee","_id","getItemAll","deleteItem","id_item","delete","changeItem","published_date","Date","now","exportedAPI"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Cookies from \"js-cookie\";\nconst qs = require(\"qs\");\nconst expire_time = 0.1;\nconst api = Cookies.withAttributes({\n  path: \"/\",\n  sameSite: \"strict\",\n  secure: true,\n});\n\nconst headers = {\n  \"Content-Type\": \"application/x-www-form-urlencoded\",\n};\nconst burl = \"http://localhost:8000\";\n\nconst url = () => {\n  return burl;\n};\n\n/**\n * Use to login with the cookies data\n * @param {String} pseudo user\n * @param {String} password user\n * @returns axios response\n */\nconst login = async (pseudo, password) => {\n  const data = {\n    pseudo,\n    password,\n  };\n  return axios\n    .post(`${burl}/users/login`, qs.stringify(data), {\n      headers: headers,\n    })\n    .then((res) => {\n      api.set(\"user\", res.data.id, { expires: expire_time, secure: true });\n      return res;\n    })\n    .catch((e) => e);\n};\n/**\n * Use to signup, by sending a axios request\n * @param {Object} send user data like this :\n * - pseudo\n * - password\n * - money\n * @returns axios response\n */\nconst signup = async (send) => {\n  return axios\n    .post(`${burl}/users/signup`, qs.stringify(send), {\n      headers: headers,\n    })\n    .then((res) => {\n      api.set(\"user\", res.data.id, { expires: expire_time, secure: true });\n      return res;\n    })\n    .catch((e) => e);\n};\n/**\n * Use to know if is authenticate\n * @returns Boolean\n */\nconst isAuth = () => {\n  return api.get(\"user\") !== undefined;\n};\n/**\n * Remove this cookie\n */\nconst logout = () => {\n  api.remove(\"user\");\n};\n/**\n * Use to get user id in this cookie\n * @returns the user id\n */\nconst getUserId = () => {\n  return api.get(\"user\");\n};\n\n/**\n * Creat a item in this data base\n * @param {Object} dataItem to creat\n * @returns Axios response\n */\nconst createItem = async (dataItem) => {\n  dataItem.id_owner = api.get(\"user\");\n  return axios\n    .post(`${burl}/items/create`, qs.stringify(dataItem), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => e);\n};\n\n/**\n * Use to get the user's object\n * @returns A list of object of this user\n */\nconst getItemUser = async () => {\n  return axios\n    .get(`${burl}/items/self/${api.get(\"user\")}`)\n    .then((res) => res.data)\n    .catch((e) => {\n      console.log(e);\n      return [];\n    });\n};\n\n/**\n * Get other's items\n * @returns Return the list of other's items\n */\nconst getItemOther = async () => {\n  return axios\n    .get(`${burl}/items/other/${api.get(\"user\")}`)\n    .then((res) => res.data)\n    .catch((e) => {\n      console.log(e);\n      return [];\n    });\n};\n\n/**\n * Set money of this user\n * @param {Number} money change\n * @returns Axios's response\n */\nconst setMoney = async (money) => {\n  return axios\n    .put(\n      `${burl}/users/wallet/${api.get(\"user\")}`,\n      qs.stringify({ money: money }),\n      {\n        headers: headers,\n      }\n    )\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst setSellItem = async (itemId, sell) => {\n  return axios\n    .put(`${burl}/items/sell/${itemId}`, qs.stringify({ sell }), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => e);\n};\n\n/**\n * Buy this item, and take the money of this users and add money to the user's item\n * @param {Object} item buy\n * @returns the change with the sell part of this item\n */\nconst buyItem = async (item) => {\n  axios\n    .get(`${burl}/users/find/${item.id_owner}`)\n    .then((e) => {\n      let argent = e.data;\n      const update_money = parseInt(argent) + item.price;\n      axios\n        .put(\n          `${burl}/users/wallet/${item.id_owner}`,\n          qs.stringify({ money: update_money }),\n          {\n            headers: headers,\n          }\n        )\n        .then((res) => res)\n        .catch((ee) => console.log(ee));\n    })\n    .catch((e) => e);\n\n  return axios\n    .put(\n      `${burl}/items/buy/${item._id}`,\n      qs.stringify({ sell: true, id: api.get(\"user\") }),\n      {\n        headers: headers,\n      }\n    )\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst getItemAll = async () => {\n  return axios\n    .get(`${burl}/items/all`)\n    .then((res) => res.data)\n    .catch((e) => {\n      console.log(e);\n      return [];\n    });\n};\n\n/**\n * Use to delete this item\n * @param {Number} id_item to delete\n * @returns Axios's response\n */\nconst deleteItem = async (id_item) => {\n  return axios\n    .delete(`${burl}/items/delete/${id_item}`)\n    .then((res) => res)\n    .catch((e) => e);\n};\n\n/**\n * Change this object\n * @param {String} id_item id of this item\n * @param {Object} dataItem modification value\n * @returns\n */\nconst changeItem = async (id_item, dataItem) => {\n  dataItem.published_date = Date.now();\n  return axios\n    .put(`${burl}/items/update/${id_item}`, qs.stringify(dataItem), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => []);\n};\n\nconst exportedAPI = {\n  url,\n  login,\n  signup,\n  isAuth,\n  logout,\n  createItem,\n  getUserId,\n  getItemUser,\n  getItemOther,\n  setMoney,\n  buyItem,\n  deleteItem,\n  changeItem,\n  getItemAll,\n  setSellItem,\n};\nexport default exportedAPI;\n"]},"metadata":{},"sourceType":"module"}