{"ast":null,"code":"var _jsxFileName = \"/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { green } from \"@mui/material/colors\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Feedback from \"./Feedback\";\nimport API from \"../utils/API\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  let navigate = useNavigate();\n  const [pseudo, set_pseudo] = useState(\"\");\n  const [password, set_password] = useState(\"\");\n  const [send, set_send] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [status, setStatus] = useState({\n    open: false\n  });\n  const timer = useRef();\n  const buttonSx = { ...(success && {\n      bgcolor: green[500],\n      \"&:hover\": {\n        bgcolor: green[700]\n      }\n    })\n  };\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(timer.current);\n    };\n  }, []);\n\n  const HandleStatus = info => {\n    const statu = {};\n\n    if (info.status < 400) {\n      statu.ok = true;\n      statu.text = \"Operation reussi\";\n    } else {\n      statu.ok = false;\n      statu.text = \"Operation echoué\";\n    }\n\n    statu.open = true;\n    setStatus(statu);\n  };\n\n  const Send = async () => {\n    if (pseudo || pseudo.length !== 0 || password || password.length !== 0) {\n      API.login(pseudo, password).then(info => {\n        HandleStatus(info);\n        set_send(true);\n      }).catch(e => console.log(e));\n    }\n  };\n\n  const handleButtonClick = () => {\n    if (pseudo.length > 0 && password.length > 0) {\n      Send();\n\n      if (!loading) {\n        setSuccess(false);\n        setLoading(true);\n        timer.current = window.setTimeout(() => {\n          setSuccess(true);\n          setLoading(false);\n          navigate(\"/\");\n        }, 1000);\n      }\n    }\n  };\n\n  const Formulaire = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      sx: {\n        textAlign: \"center\"\n      },\n      noValidate: true,\n      autoComplete: \"off\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          error: send && pseudo.length === 0,\n          helperText: send && pseudo.length === 0 ? \"A remplir\" : \"\",\n          type: \"text\",\n          onChange: e => set_pseudo(e.target.value),\n          value: pseudo,\n          label: \"Pseudo *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          sx: {\n            width: '25%'\n          },\n          type: \"password\",\n          onChange: e => set_password(e.target.value),\n          value: password,\n          label: \"Mot de passe *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  };\n\n  const Footer = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        sx: buttonSx,\n        disabled: loading,\n        onClick: handleButtonClick,\n        children: \"CONNEXION\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 24,\n        sx: {\n          color: green[500],\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          marginTop: \"-12px\",\n          marginLeft: \"-12px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"ou\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/sign_up\",\n          style: {\n            color: \"orange\",\n            textDecoration: \"inherit\"\n          },\n          children: [\" \", \"identifiez vous\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [Formulaire(), Feedback({\n      ok: status.ok,\n      text: status.text,\n      open: status.open\n    }), Footer()]\n  }, void 0, true);\n}\n\n_s(Login, \"RyeziQnbTJehMWyPRKPtJ4UJ+9k=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/components/Login.js"],"names":["React","useState","useRef","Button","Box","TextField","CircularProgress","green","Link","useNavigate","Feedback","API","Login","navigate","pseudo","set_pseudo","password","set_password","send","set_send","loading","setLoading","success","setSuccess","status","setStatus","open","timer","buttonSx","bgcolor","useEffect","clearTimeout","current","HandleStatus","info","statu","ok","text","Send","length","login","then","catch","e","console","log","handleButtonClick","window","setTimeout","Formulaire","textAlign","target","value","width","Footer","color","position","top","left","marginTop","marginLeft","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { green } from \"@mui/material/colors\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport Feedback from \"./Feedback\";\nimport API from \"../utils/API\";\n\nexport default function Login() {\n  let navigate = useNavigate();\n  const [pseudo, set_pseudo] = useState(\"\");\n  const [password, set_password] = useState(\"\");\n  const [send, set_send] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [status, setStatus] = useState({\n    open: false,\n  });\n  const timer = useRef();\n\n  const buttonSx = {\n    ...(success && {\n      bgcolor: green[500],\n      \"&:hover\": {\n        bgcolor: green[700],\n      },\n    }),\n  };\n\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(timer.current);\n    };\n  }, []);\n\n  const HandleStatus = (info) => {\n    const statu = {};\n    if (info.status < 400) {\n      statu.ok = true;\n      statu.text = \"Operation reussi\";\n    } else {\n      statu.ok = false;\n      statu.text = \"Operation echoué\";\n    }\n    statu.open = true;\n    setStatus(statu);\n  };\n\n  const Send = async () => {\n    if (pseudo || pseudo.length !== 0 || password || password.length !== 0) {\n      API.login(pseudo, password)\n        .then((info) => {\n          HandleStatus(info);\n          set_send(true);\n        })\n        .catch((e) => console.log(e));\n    }\n  };\n\n  const handleButtonClick = () => {\n    if (pseudo.length > 0 && password.length > 0) {\n      Send();\n      if (!loading) {\n        setSuccess(false);\n        setLoading(true);\n        timer.current = window.setTimeout(() => {\n          setSuccess(true);\n          setLoading(false);\n          navigate(\"/\");\n        }, 1000);\n      }\n    }\n  };\n\n  const Formulaire = () => {\n    return (\n      <Box\n        component=\"form\"\n        sx={{\n          textAlign: \"center\",\n        }}\n        noValidate\n        autoComplete=\"off\"\n      >\n        <div>\n          <TextField\n            error={send && pseudo.length === 0}\n            helperText={send && pseudo.length === 0 ? \"A remplir\" : \"\"}\n            type=\"text\"\n            onChange={(e) => set_pseudo(e.target.value)}\n            value={pseudo}\n            label=\"Pseudo *\"\n          ></TextField>\n          <TextField\n          sx={{ width: '25%' }}\n            type=\"password\"\n            onChange={(e) => set_password(e.target.value)}\n            value={password}\n            label=\"Mot de passe *\"\n          ></TextField>\n        </div>\n      </Box>\n    );\n  };\n\n  const Footer = () => {\n    return (\n      <Box sx={{textAlign: \"center\"}}>\n        <Button\n          variant=\"contained\"\n          sx={buttonSx}\n          disabled={loading}\n          onClick={handleButtonClick}\n        >\n          CONNEXION\n        </Button>\n        {loading && (\n          <CircularProgress\n            size={24}\n            sx={{\n              color: green[500],\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              marginTop: \"-12px\",\n              marginLeft: \"-12px\",\n            }}\n          />\n        )}\n        <p>\n          ou{\" \"}\n          <Link\n            to=\"/sign_up\"\n            style={{ color: \"orange\", textDecoration: \"inherit\" }}\n          >\n            {\" \"}\n            identifiez vous\n          </Link>\n        </p>\n      </Box>\n    );\n  };\n  return (\n    <>\n      {Formulaire()}\n      {Feedback({ ok: status.ok, text: status.text, open: status.open })}\n      {Footer()}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}