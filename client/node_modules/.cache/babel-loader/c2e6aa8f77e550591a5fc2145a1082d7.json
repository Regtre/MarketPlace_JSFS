{"ast":null,"code":"var _jsxFileName = \"/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/components/Signup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport Feedback from \"./Feedback\";\nimport API from \"../utils/API\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Signup() {\n  _s();\n\n  const [pseudo, set_pseudo] = useState(\"\");\n  const [password, set_password] = useState(\"\");\n  const [cpassword, set_cpassword] = useState(\"\");\n  const [money, set_money] = useState(\"\");\n  const [status, setStatus] = useState({\n    open: false\n  });\n  const [send, set_send] = useState(false);\n  let navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [close, setClose] = useState(true);\n  const timer = useRef();\n\n  const HandleStatus = info => {\n    const statu = {};\n\n    if (info.status < 400) {\n      statu.ok = true;\n      statu.text = \"Operation reussi\";\n    } else {\n      statu.ok = false;\n      statu.text = \"Operation echoué\";\n    }\n\n    statu.open = true;\n    setStatus(statu);\n  };\n\n  const Send = async () => {\n    if (!pseudo || pseudo.length === 0) return;\n    if (!password || password.length === 0 || password !== cpassword) return;\n    API.signup({\n      pseudo,\n      password,\n      money\n    }).then(data => HandleRedirecting(data)).catch(e => console.log(e)).then(set_send(true));\n  };\n\n  const HandleRedirecting = data => {\n    HandleStatus(data);\n    timer.current = window.setTimeout(() => {\n      setSuccess(true);\n      setLoading(false);\n      setClose(true);\n      navigate(\"/\");\n    }, 3000);\n  };\n\n  const Formulaire = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      sx: {\n        \"& .MuiTextField-root\": {\n          m: 1.5,\n          width: \"35ch\"\n        }\n      },\n      noValidate: true,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          error: send && pseudo.length === 0,\n          helperText: send && pseudo.length === 0 ? \"A remplir\" : \"\",\n          type: \"text\",\n          onChange: e => set_pseudo(e.target.value),\n          value: pseudo,\n          label: \"Pseudo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"password\",\n          onChange: e => set_password(e.target.value),\n          value: password,\n          label: \"Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"password\",\n          onChange: e => set_cpassword(e.target.value),\n          value: cpassword,\n          label: \"Confirme mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          type: \"number\",\n          onChange: e => set_money(e.target.value),\n          value: money,\n          label: \"Quantit\\xE9 d'argent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  };\n\n  const Footer = () => {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => Send(),\n        children: \"VALIDE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n        size: 24,\n        sx: {\n          color: green[500],\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          marginTop: \"-12px\",\n          marginLeft: \"-12px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"ou\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          style: {\n            color: \"orange\",\n            textDecoration: \"inherit\"\n          },\n          children: \"connectez-vous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [Formulaire(), Feedback({\n      ok: status.ok,\n      text: status.text,\n      open: status.open\n    }), Footer()]\n  }, void 0, true);\n}\n\n_s(Signup, \"xtlq9Hx5zPuxHiQJiIzdcM/wRK0=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/components/Signup.js"],"names":["React","useState","useRef","Button","Box","TextField","CircularProgress","useNavigate","Link","Feedback","API","Signup","pseudo","set_pseudo","password","set_password","cpassword","set_cpassword","money","set_money","status","setStatus","open","send","set_send","navigate","loading","setLoading","success","setSuccess","close","setClose","timer","HandleStatus","info","statu","ok","text","Send","length","signup","then","data","HandleRedirecting","catch","e","console","log","current","window","setTimeout","Formulaire","m","width","target","value","Footer","color","green","position","top","left","marginTop","marginLeft","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport Feedback from \"./Feedback\";\nimport API from \"../utils/API\";\n\nexport default function Signup() {\n  const [pseudo, set_pseudo] = useState(\"\");\n  const [password, set_password] = useState(\"\");\n  const [cpassword, set_cpassword] = useState(\"\");\n  const [money, set_money] = useState(\"\");\n  const [status, setStatus] = useState({\n    open: false,\n  });\n  const [send, set_send] = useState(false);\n  let navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [close, setClose] = useState(true);\n  const timer = useRef();\n\n  const HandleStatus = (info) => {\n    const statu = {};\n    if (info.status < 400) {\n      statu.ok = true;\n      statu.text = \"Operation reussi\";\n    } else {\n      statu.ok = false;\n      statu.text = \"Operation echoué\";\n    }\n    statu.open = true;\n    setStatus(statu);\n  };\n\n  const Send = async () => {\n    if (!pseudo || pseudo.length === 0) return;\n    if (!password || password.length === 0 || password !== cpassword) return;\n    API.signup({ pseudo, password, money })\n      .then((data) => HandleRedirecting(data))\n      .catch((e) => console.log(e))\n      .then(set_send(true));\n  };\n\n  const HandleRedirecting = (data) => {\n    HandleStatus(data);\n    timer.current = window.setTimeout(() => {\n      setSuccess(true);\n      setLoading(false);\n      setClose(true);\n      navigate(\"/\");\n    }, 3000);\n  };\n\n  const Formulaire = () => {\n    return (\n      <Box\n        component=\"form\"\n        sx={{\n          \"& .MuiTextField-root\": { m: 1.5, width: \"35ch\" },\n        }}\n        noValidate\n        autoComplete=\"off\"\n      >\n        <div>\n          <TextField\n            error={send && pseudo.length === 0}\n            helperText={send && pseudo.length === 0 ? \"A remplir\" : \"\"}\n            type=\"text\"\n            onChange={(e) => set_pseudo(e.target.value)}\n            value={pseudo}\n            label=\"Pseudo\"\n          />\n        </div>\n        <div>\n          <TextField\n            type=\"password\"\n            onChange={(e) => set_password(e.target.value)}\n            value={password}\n            label=\"Mot de passe\"\n          />\n        </div>\n        <div>\n          <TextField\n            type=\"password\"\n            onChange={(e) => set_cpassword(e.target.value)}\n            value={cpassword}\n            label=\"Confirme mot de passe\"\n          />\n        </div>\n        <div>\n          <TextField\n            type=\"number\"\n            onChange={(e) => set_money(e.target.value)}\n            value={money}\n            label=\"Quantité d'argent\"\n          />\n        </div>\n      </Box>\n    );\n  };\n\n  const Footer = () => {\n    return (\n      <Box>\n        <Button onClick={() => Send()}>VALIDE</Button>\n        {loading && (\n          <CircularProgress\n            size={24}\n            sx={{\n              color: green[500],\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              marginTop: \"-12px\",\n              marginLeft: \"-12px\",\n            }}\n          />\n        )}\n        <p>\n          ou{\" \"}\n          <Link\n            to=\"/login\"\n            style={{ color: \"orange\", textDecoration: \"inherit\" }}\n          >\n            connectez-vous\n          </Link>\n        </p>\n      </Box>\n    );\n  };\n  return (\n    <>\n      {Formulaire()}\n      {Feedback({ ok: status.ok, text: status.text, open: status.open })}\n      {Footer()}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}