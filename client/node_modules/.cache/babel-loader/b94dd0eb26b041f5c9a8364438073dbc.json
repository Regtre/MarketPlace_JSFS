{"ast":null,"code":"import axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst qs = require(\"qs\");\n\nconst expire_time = 0.1;\nconst api = Cookies.withAttributes({\n  path: \"/\",\n  sameSite: \"strict\",\n  secure: true\n});\nconst headers = {\n  \"Content-Type\": \"application/x-www-form-urlencoded\"\n};\nconst burl = \"http://localhost:8000\";\n\nconst url = () => {\n  return burl;\n};\n\nconst login = async (pseudo, password) => {\n  const data = {\n    pseudo,\n    password\n  };\n  return axios.post(`${burl}/users/login`, qs.stringify(data), {\n    headers: headers\n  }).then(res => {\n    api.set(\"user\", res.data.id, {\n      expires: expire_time,\n      secure: true\n    });\n    return res;\n  }).catch(e => e);\n};\n\nconst signup = async send => {\n  return axios.post(`${burl}/users/signup`, qs.stringify(send), {\n    headers: headers\n  }).then(res => {\n    api.set(\"user\", res.data.id, {\n      expires: expire_time,\n      secure: true\n    });\n    return res;\n  }).catch(e => e);\n};\n\nconst isAuth = () => {\n  return api.get(\"user\") !== undefined;\n};\n\nconst logout = () => {\n  api.remove(\"user\");\n};\n\nconst getUserId = () => {\n  return api.get(\"user\");\n};\n\nconst createItem = async dataItem => {\n  dataItem.id_owner = api.get(\"user\");\n  return axios.post(`${burl}/items/create`, qs.stringify(dataItem), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst getItemUser = async () => {\n  return axios.get(`${burl}/items/self/${api.get(\"user\")}`).then(res => res.data).catch(e => {\n    console.log(e);\n    return [];\n  });\n};\n\nconst getItemOther = async () => {\n  return axios.get(`${burl}/items/other/${api.get(\"user\")}`).then(res => res.data).catch(e => {\n    console.log(e);\n    return [];\n  });\n};\n\nconst setMoney = async money => {\n  return axios.put(`${burl}/users/wallet/${api.get(\"user\")}`, qs.stringify({\n    money: money\n  }), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst buyItem = async id_item => {\n  return axios.put(`${burl}/items/buy/${id_item}`, qs.stringify({\n    sell: true\n  }), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst deleteItem = async id_item => {\n  return axios.delete(`${burl}/items/delete/${id_item}`).then(res => res).catch(e => e);\n};\n/**\n * Change this object\n * @param {String} id_item id of this item\n * @param {Object} dataItem modification value\n * @returns\n */\n\n\nconst changeItem = async (id_item, dataItem) => {\n  dataItem.published_date = Date.now();\n  return axios.put(`${burl}/items/update/${id_item}`, qs.stringify(dataItem), {\n    headers: headers\n  }).then(res => res).catch(e => e);\n};\n\nconst exportedAPI = {\n  url,\n  login,\n  signup,\n  isAuth,\n  logout,\n  createItem,\n  getUserId,\n  getItemUser,\n  getItemOther,\n  setMoney,\n  buyItem,\n  deleteItem,\n  changeItem\n};\nexport default exportedAPI;","map":{"version":3,"sources":["/home/rems/Documents/FAC/L3/S6/JSFS/vendez_les_votre/client/src/utils/API.js"],"names":["axios","Cookies","qs","require","expire_time","api","withAttributes","path","sameSite","secure","headers","burl","url","login","pseudo","password","data","post","stringify","then","res","set","id","expires","catch","e","signup","send","isAuth","get","undefined","logout","remove","getUserId","createItem","dataItem","id_owner","getItemUser","console","log","getItemOther","setMoney","money","put","buyItem","id_item","sell","deleteItem","delete","changeItem","published_date","Date","now","exportedAPI"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport Cookies from \"js-cookie\";\nconst qs = require(\"qs\");\nconst expire_time = 0.1;\nconst api = Cookies.withAttributes({\n  path: \"/\",\n  sameSite: \"strict\",\n  secure: true,\n});\n\nconst headers = {\n  \"Content-Type\": \"application/x-www-form-urlencoded\",\n};\nconst burl = \"http://localhost:8000\";\n\nconst url = () => {\n  return burl;\n};\n\nconst login = async (pseudo, password) => {\n  const data = {\n    pseudo,\n    password,\n  };\n  return axios\n    .post(`${burl}/users/login`, qs.stringify(data), {\n      headers: headers,\n    })\n    .then((res) => {\n      api.set(\"user\", res.data.id, { expires: expire_time, secure: true });\n      return res;\n    })\n    .catch((e) => e);\n};\nconst signup = async (send) => {\n  return axios\n    .post(`${burl}/users/signup`, qs.stringify(send), {\n      headers: headers,\n    })\n    .then((res) => {\n      api.set(\"user\", res.data.id, { expires: expire_time, secure: true });\n      return res;\n    })\n    .catch((e) => e);\n};\n\nconst isAuth = () => {\n  return api.get(\"user\") !== undefined;\n};\nconst logout = () => {\n  api.remove(\"user\");\n};\n\nconst getUserId = () => {\n  return api.get(\"user\");\n};\n\nconst createItem = async (dataItem) => {\n  dataItem.id_owner = api.get(\"user\");\n  return axios\n    .post(`${burl}/items/create`, qs.stringify(dataItem), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst getItemUser = async () => {\n  return axios\n    .get(`${burl}/items/self/${api.get(\"user\")}`)\n    .then((res) => res.data)\n    .catch((e) => {\n      console.log(e);\n      return [];\n    });\n};\n\nconst getItemOther = async () => {\n  return axios\n    .get(`${burl}/items/other/${api.get(\"user\")}`)\n    .then((res) => res.data)\n    .catch((e) => {\n      console.log(e);\n      return [];\n    });\n};\n\nconst setMoney = async (money) => {\n  return axios\n    .put(\n      `${burl}/users/wallet/${api.get(\"user\")}`,\n      qs.stringify({ money: money }),\n      {\n        headers: headers,\n      }\n    )\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst buyItem = async (id_item) => {\n  return axios\n    .put(`${burl}/items/buy/${id_item}`, qs.stringify({ sell: true }), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst deleteItem = async (id_item) => {\n  return axios\n    .delete(`${burl}/items/delete/${id_item}`)\n    .then((res) => res)\n    .catch((e) => e);\n};\n\n/**\n * Change this object\n * @param {String} id_item id of this item\n * @param {Object} dataItem modification value\n * @returns\n */\nconst changeItem = async (id_item, dataItem) => {\n  dataItem.published_date = Date.now();\n  return axios\n    .put(`${burl}/items/update/${id_item}`, qs.stringify(dataItem), {\n      headers: headers,\n    })\n    .then((res) => res)\n    .catch((e) => e);\n};\n\nconst exportedAPI = {\n  url,\n  login,\n  signup,\n  isAuth,\n  logout,\n  createItem,\n  getUserId,\n  getItemUser,\n  getItemOther,\n  setMoney,\n  buyItem,\n  deleteItem,\n  changeItem,\n};\nexport default exportedAPI;\n"]},"metadata":{},"sourceType":"module"}